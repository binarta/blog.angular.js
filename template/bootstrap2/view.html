<div class="container bin-blog bin-blog-view">
    <div class="row">
        <article>
            <div class="span8 offset2">
                <div class="well clearfix">
                    <div class="alert alert-info" ng-if="item.status != 'published'">
                        <i class="fa fa-square fa-fw"></i> DRAFT
                    </div>
                    <h2 class="inline bin-article-title" i18n code="{{item.id}}" default="{{item.id}}">
                        {{var}}
                    </h2>
                    <div class="pull-right text-right bin-article-buttons" ng-if="editing">
                        <form ng-if="item" ng-controller="UpdateCatalogItemController" ng-init="init(item)">
                            <div ng-if="item.status != 'published'">
                                <button class="btn btn-success" ng-click="item.status = 'published'; update();"
                                        ng-disabled="working">
                                    <span ng-if="!working"><i class="fa fa-eye fa-fw"></i></span>
                                    <span ng-if="working"><i class="fa fa-spinner fa-spin fa-fw"></i></span>
                                    Publish
                                </button>
                            </div>
                            <div ng-if="item.status == 'published'">
                                <button class="btn btn-success" ng-click="item.status = 'draft'; update();"
                                        ng-disabled="working">
                                    <span ng-if="!working"><i class="fa fa-eye-slash fa-fw"></i></span>
                                    <span ng-if="working"><i class="fa fa-spinner fa-spin fa-fw"></i></span>
                                    Unpublish
                                </button>
                            </div>
                        </form>
                        <div checkpoint-permission-for="catalog.item.remove">
                            <form ng-if="permitted" ng-controller="RemoveItemFromCatalogController"
                                  ng-init="init({redirect:locale + '/blog'})">
                                <button class="btn btn-danger" ng-click-confirm="submit(item.id)" ng-disabled="working">
                                    <span ng-if="!working"><i class="fa fa-times fa-fw"></i></span>
                                    <span ng-if="working"><i class="fa fa-spinner fa-spin fa-fw"></i></span>
                                    Remove
                                </button>
                            </form>
                        </div>
                    </div>
                    <div>
                        <ul class="inline">
                            <li>
                                <i class="fa fa-calendar fa-fw"></i> {{item.creationTime | amDateFormat:'MMMM DD, YYYY'}}
                                |
                            </li>
                            <li ng-if="settings.useBlogTypes">
                                <i class="fa fa-tag"></i>
                                <i18n class="inline" code="blog.type.{{item.blogType}}" default="{{item.blogType}}">
                                    {{var}}
                                </i18n>
                                |
                            </li>
                            <li>
                                <span i18n code="blog.back" default="back" class="inline">
                                    <a href="#!/{{locale}}/blog">
                                        <i class="fa fa-caret-left"></i> {{var}}
                                    </a>
                                </span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="span8 offset2">
                <p class="bin-article-lead lead" i18n code="{{item.id}}.lead" editor="full"
                   ng-bind-html="var|trust">
                </p>

                <i18n class="inline" code="{{item.id}}.body" editor="full">
                    <span class="btn btn-success" ng-if="editing && !var">
                        <i class="fa fa-plus fa-fw"></i> Add a body
                    </span>
                    <p class="bin-article-body" ng-if="var" ng-bind-html="var|trust">
                    </p>
                </i18n>
            </div>
            <div class="span8 offset2 text-center">
                <div class="img-polaroid bin-article-image-wrapper">
                    <image-show path="images{{item.id}}/cover.img"
                                alt="blog post cover image"
                                image-class="bin-article-image">
                    </image-show>
                </div>
            </div>
        </article>
    </div>
</div>