<div checkpoint-permission-for="catalog.item.add">
    <div class="container bin-blog bin-blog-add" ng-if="permitted">
        <div class="row">
            <div class="col-sm-8 col-sm-offset-2">
                <div ng-controller="AddBlogController">
                    <form ng-controller="AddToCatalogController"
                          ng-init="init({partition:'/blog/', type:'blog', redirectToView:true})"
                          ng-submit="submit()">

                        <div ng-if="item.type" ng-init="item.blogType = blogTypes[0].code"></div>

                        <div class="row" ng-if="settings.useBlogTypes">
                            <div class="col-sm-4">
                                <div class="form-group has-{{errorClassFor['blogType']}}">
                                    <label class="control-label" for="blogType"
                                           i18n code="blog.article.add.type.label" default="Type" read-only>
                                        {{var}}
                                    </label>
                                    <select id="blogType" class="form-control" ng-model="item.blogType"
                                        ng-options="b.code as b.label for b in blogTypes">
                                    </select>
                                    <span ng-repeat="v in violations['blogType']" class="help-block">
                                        <i18n code="{{v}}" default="{{v}}" ng-if="v!='required'">
                                            {{var}}
                                        </i18n>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group has-{{errorClassFor['defaultName']}}">
                            <label class="control-label" for="title"
                                   i18n code="blog.article.add.title.label" default="Title" read-only>
                                {{var}}
                            </label>
                            <input type="text" id="title" ng-model="item.defaultName" class="form-control">
                            <span ng-repeat="v in violations['defaultName']" class="help-block">
                                <i18n code="{{v}}" default="{{v}}" ng-if="v!='required'">
                                    {{var}}
                                </i18n>
                            </span>
                        </div>

                        <div class="form-group has-{{errorClassFor['lead']}}">
                            <label class="control-label" for="lead"
                                   i18n code="blog.article.add.lead.label" default="Lead" read-only>
                                {{var}}
                            </label>
                            <textarea id="lead" class="form-control" ui-tinymce="{
                                    plugins: ['link fullscreen textcolor paste table'],
                                    toolbar: 'undo redo | styleselect | bold italic | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent table | link | fullscreen',
                                    theme_advanced_resizing: true,
                                    theme_advanced_resizing_use_cookie : false,
                                    height:'100',
                                    menubar:false
                                }" ng-model="item.lead"></textarea>
                            <span ng-repeat="v in violations['lead']" class="help-block">
                                <i18n code="{{v}}" default="{{v}}" ng-if="v!='required'">
                                    {{var}}
                                </i18n>
                            </span>
                        </div>

                        <div class="form-group has-{{errorClassFor['body']}}">
                            <label class="control-label" for="body"
                                   i18n code="blog.article.add.body.label" default="Body" read-only>
                                {{var}}
                            </label>
                            <textarea id="body" class="form-control" ui-tinymce="{
                                    plugins: ['link fullscreen textcolor paste table'],
                                    toolbar: 'undo redo | styleselect | bold italic | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent table | link | fullscreen',
                                    theme_advanced_resizing: true,
                                    theme_advanced_resizing_use_cookie : false,
                                    height:'180',
                                    menubar:false
                                }" ng-model="item.body"></textarea>
                            <span ng-repeat="v in violations['body']" class="help-block">
                                <i18n code="{{v}}" default="{{v}}" ng-if="v!='required'">
                                    {{var}}
                                </i18n>
                            </span>
                        </div>

                        <div class="checkbox">
                            <label i18n code="blog.article.add.published.checkbox" default="Published" read-only>
                                <input id="status" type="checkbox" ng-model="item.status"
                                       ng-true-value="published"
                                       ng-false-value="draft">
                                {{var}}
                            </label>
                        </div>

                        <button type="submit" class="btn btn-success" ng-disabled="working">
                            <span ng-if="!working"><i class="fa fa-plus fa-fw"></i></span>
                            <span ng-if="working"><i class="fa fa-spinner fa-spin fa-fw"></i></span>
                            <span class="inline" i18n code="blog.article.add.button" default="Add article" read-only>{{var}}</span>
                        </button>
                        <a class="btn btn-danger" ng-href="#!{{localePrefix}}/blog">
                            <i class="fa fa-times fa-fw"></i>
                            <span class="inline" i18n code="blog.article.cancel.button" default="Cancel" read-only>
                                {{var}}
                            </span>
                        </a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>